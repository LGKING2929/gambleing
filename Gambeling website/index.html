    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Grand Casino 777</title>
        <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
        <style>
            /* General Body Styling for both sections */
            body {
                font-family: 'Orbitron', sans-serif;
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
                background: linear-gradient(to bottom right, #000000, #1a1a1a); /* Darker gradient */
                color: #eee;
                margin: 0;
                overflow-x: hidden; /* Prevent horizontal scroll */
                position: relative; /* For background pattern */
            }

            /* Subtle background pattern/texture (CSS-only) */
            body::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-image:
                    radial-gradient(circle at center, rgba(255, 215, 0, 0.05) 1px, transparent 1px),
                    radial-gradient(circle at center, rgba(255, 215, 0, 0.05) 1px, transparent 1px);
                background-size: 20px 20px;
                background-position: 0 0, 10px 10px;
                opacity: 0.3;
                z-index: 0;
            }

            /* Page Section Management */
            .page-section {
                display: none; /* Hidden by default */
                width: 90%;
                max-width: 700px; /* Default for homepage */
                position: relative;
                z-index: 1; /* Above background pattern */
                background-color: rgba(0, 0, 0, 0.85); /* Very dark, almost opaque */
                padding: 60px;
                border-radius: 20px;
                box-shadow: 0 0 50px rgba(255, 215, 0, 0.7), 0 0 20px rgba(0, 0, 0, 0.9); /* Stronger gold glow */
                text-align: center;
                border: 3px solid gold; /* Thicker gold border */
                animation: fadeIn 1s ease-out forwards;
            }

            .page-section.active {
                display: flex; /* Flexbox for internal layout if needed */
                flex-direction: column;
                align-items: center;
            }

            @keyframes fadeIn {
                from { opacity: 0; transform: scale(0.8); }
                to { opacity: 1; transform: scale(1); }
            }

            /* Homepage Specific Styling */
            #homepage {
                max-width: 700px;
            }

            #homepage h1 {
                font-family: 'Luckiest Guy', cursive;
                color: #ffd700; /* Gold */
                font-size: 4.5em; /* Larger title */
                margin-bottom: 30px;
                text-shadow: 0 0 20px rgba(255, 215, 0, 0.9);
                letter-spacing: 3px;
                text-transform: uppercase;
            }

            #homepage p {
                font-size: 1.5em;
                color: #ccc;
                margin-bottom: 40px;
                line-height: 1.5;
                text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            }

            .enter-button {
                background: linear-gradient(to right, #e74c3c, #c0392b); /* Fiery red gradient */
                color: white;
                border: 3px solid #a82e21;
                padding: 20px 40px;
                border-radius: 12px;
                font-size: 2em;
                font-weight: bold;
                text-transform: uppercase;
                letter-spacing: 2px;
                cursor: pointer;
                text-decoration: none;
                display: inline-block;
                transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
                box-shadow: 0 8px 20px rgba(231, 76, 60, 0.5);
            }

            .enter-button:hover {
                background: linear-gradient(to right, #c0392b, #e74c3c);
                transform: translateY(-5px);
                box-shadow: 0 12px 30px rgba(231, 76, 60, 0.7);
            }

            .enter-button:active {
                transform: translateY(0);
                box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
            }

            /* Casino Lobby Specific Styling */
            #casino-lobby {
                max-width: 800px; /* Increased max-width for more content */
                padding: 40px; /* Slightly less padding than homepage */
                display: flex; /* Overriding default 'none' for active state */
                flex-direction: column;
            }

            #casino-lobby h1 {
                font-family: 'Luckiest Guy', cursive;
                color: #ffd700;
                font-size: 3em;
                margin-bottom: 25px;
                text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
                letter-spacing: 2px;
            }

            /* Balance Display */
            .balance {
                font-size: 1.8em;
                font-weight: bold;
                color: #00ff00;
                margin-bottom: 25px;
                border: 1px solid #00aa00;
                padding: 10px 20px;
                border-radius: 8px;
                background-color: rgba(0, 50, 0, 0.3);
                box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
            }

            /* Game Selection Tabs */
            .game-selection {
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
                gap: 10px;
                margin-bottom: 30px;
                border-bottom: 2px solid #555;
                padding-bottom: 10px;
            }

            .game-selection button {
                background-color: #333;
                color: #ccc;
                border: 1px solid #555;
                padding: 10px 20px;
                border-radius: 5px 5px 0 0;
                cursor: pointer;
                font-size: 1.1em;
                font-weight: bold;
                transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            }

            .game-selection button.active {
                background-color: #ffd700;
                color: #333;
                border-color: #ffd700;
                box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            }

            .game-selection button:hover:not(.active) {
                background-color: #555;
                color: white;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            }

            /* Input Group */
            .input-group {
                margin-bottom: 25px;
                background-color: rgba(255, 255, 255, 0.1);
                padding: 15px;
                border-radius: 10px;
            }

            label {
                display: block;
                margin-bottom: 10px;
                font-weight: bold;
                color: #aaa;
                font-size: 1.1em;
            }

            input[type="number"] {
                width: calc(100% - 24px);
                padding: 12px;
                margin-top: 5px;
                border: 2px solid #555;
                border-radius: 8px;
                font-size: 1.2em;
                background-color: #222;
                color: #00ff00;
                text-align: center;
                appearance: none;
                -moz-appearance: textfield;
                box-shadow: inset 0 0 5px rgba(0, 255, 0, 0.2);
            }
            input[type="number"]::-webkit-outer-spin-button,
            input[type="number"]::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }


            /* Buttons - Casino Style (general for game actions) */
            .game-area .buttons button, .game-area .game-controls button, .dice-buttons button {
                background: linear-gradient(to bottom, #ffd700, #daa520);
                color: #333;
                border: 2px solid #b8860b;
                padding: 15px 30px;
                border-radius: 10px;
                cursor: pointer;
                font-size: 1.3em;
                font-weight: bold;
                margin: 8px;
                transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
                box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
                text-transform: uppercase;
                letter-spacing: 1px;
                white-space: nowrap;
            }

            .game-area .buttons button:hover, .game-area .game-controls button:hover, .dice-buttons button:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 20px rgba(255, 215, 0, 0.6);
                background: linear-gradient(to bottom, #ffe85c, #c08d00);
            }

            .game-area .buttons button:active, .game-area .game-controls button:active, .dice-buttons button:active {
                transform: translateY(0);
                box-shadow: 0 3px 10px rgba(255, 215, 0, 0.3);
            }

            .game-area .buttons button:disabled, .game-area .game-controls button:disabled, .dice-buttons button:disabled {
                background: #555;
                color: #aaa;
                border-color: #333;
                cursor: not-allowed;
                box-shadow: none;
                transform: none;
            }

            /* Message and Result Display */
            .message {
                margin-top: 20px;
                margin-bottom: 15px;
                font-size: 1.2em;
                font-weight: bold;
                min-height: 1.5em;
                text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            }
            .message.win { color: #00ff00; text-shadow: 0 0 8px rgba(0, 255, 0, 0.7); }
            .message.loss { color: #ff4500; text-shadow: 0 0 8px rgba(255, 69, 0, 0.7); }
            .message.info { color: #add8e6; }
            .message.error { color: #ff0000; text-shadow: 0 0 8px rgba(255, 0, 0, 0.7); }


            .outcome-display {
                font-family: 'Luckiest Guy', cursive;
                font-size: 2.8em;
                font-weight: bold;
                color: #ffd700;
                margin-top: 20px;
                min-height: 1.5em;
                text-shadow: 0 0 18px rgba(255, 215, 0, 0.8);
                animation: bounceIn 0.5s ease-out;
            }

            @keyframes bounceIn {
                0% { transform: scale(0.5); opacity: 0; }
                50% { transform: scale(1.1); opacity: 1; }
                100% { transform: scale(1); }
            }

            /* Specific Game Areas */
            .game-area {
                display: none;
                border: 1px solid #444;
                padding: 20px;
                border-radius: 10px;
                background-color: rgba(255, 255, 255, 0.05);
                margin-top: 20px;
                box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
                flex-grow: 1;
                position: relative;
            }

            .game-area.active {
                display: block;
                animation: slideIn 0.5s ease-out;
            }

            @keyframes slideIn {
                from { opacity: 0; transform: translateX(-20px); }
                to { opacity: 1; transform: translateX(0); }
            }

            /* Coin Flip specific */
            #coinFlipGame .buttons {
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
                gap: 15px;
            }

            /* Dice Roll specific */
            .dice-container {
                display: flex;
                justify-content: center;
                gap: 20px;
                margin-bottom: 20px;
            }

            .dice {
                width: 90px;
                height: 90px;
                background-color: #eee;
                border: 4px solid #333;
                border-radius: 18px;
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 3.5em;
                font-weight: bold;
                color: #333;
                box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.6), 0 8px 20px rgba(0, 0, 0, 0.4);
                transition: transform 0.2s ease-out;
            }

            .dice.rolling {
                animation: rollDice 0.3s infinite linear;
            }

            @keyframes rollDice {
                0% { transform: rotate(0deg) scale(1); }
                25% { transform: rotate(90deg) scale(1.05); }
                50% { transform: rotate(180deg) scale(1); }
                75% { transform: rotate(270deg) scale(1.05); }
                100% { transform: rotate(360deg) scale(1); }
            }

            .dice-buttons {
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
                gap: 10px;
                margin-top: 15px;
            }
            .dice-buttons button {
                background: linear-gradient(to bottom, #007bff, #0056b3);
                color: white;
                border: 2px solid #004085;
            }
            .dice-buttons button:hover {
                background: linear-gradient(to bottom, #0056b3, #007bff);
            }

            /* Slot Machine Specific */
            .slot-reels-container {
                display: flex;
                justify-content: center;
                gap: 15px;
                margin-bottom: 30px;
            }

            .slot-reel {
                width: 100px;
                height: 120px;
                background-color: #333;
                border: 4px solid #555;
                border-radius: 10px;
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 4em;
                overflow: hidden;
                position: relative;
                box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.7), 0 5px 15px rgba(0, 0, 0, 0.3);
                transition: border-color 0.3s ease;
            }

            .slot-reel.highlight {
                border-color: #00ff00;
                box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.7), 0 0 25px rgba(0, 255, 0, 0.7);
            }

            .slot-symbol {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                white-space: nowrap;
                animation: none;
            }

            .slot-reel.spinning .slot-symbol {
                animation: spinReel 0.1s infinite linear;
            }
            .slot-reel.spinning:nth-child(2) .slot-symbol { animation-delay: 0.05s; }
            .slot-reel.spinning:nth-child(3) .slot-symbol { animation-delay: 0.1s; }

            @keyframes spinReel {
                0% { transform: translate(-50%, -50%) translateY(0); opacity: 1; }
                100% { transform: translate(-50%, -50%) translateY(100%); opacity: 0.5; }
            }

            .slot-spin-button {
                background: linear-gradient(to bottom, #ff0000, #cc0000);
                border: 3px solid #8b0000;
            }
            .slot-spin-button:hover {
                background: linear-gradient(to bottom, #cc0000, #ff0000);
            }

            /* Back to Entrance Button */
            .back-to-entrance {
                background: linear-gradient(to bottom, #6c757d, #495057); /* Gray gradient */
                color: white;
                border: 2px solid #343a40;
                padding: 10px 20px;
                border-radius: 8px;
                cursor: pointer;
                font-size: 1em;
                margin-top: 30px;
                transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
                box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
            }

            .back-to-entrance:hover {
                background: linear-gradient(to bottom, #495057, #6c757d);
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            }
        </style>
    </head>
    <body>
        <div id="homepage" class="page-section active">
            <h1>Welcome to Grand Casino 777</h1>
            <p>Experience the thrill of Vegas right from your browser!</p>
            <button id="enterCasinoBtn" class="enter-button">Enter Casino</button>
        </div>

        <div id="casino-lobby" class="page-section">
            <h1>Grand Casino 777</h1>
            <p class="balance">Your Balance: $<span id="playerBalance">1000</span></p>

            <div class="game-selection">
                <button id="showCoinFlipBtn" class="active">Coin Flip</button>
                <button id="showDiceRollBtn">Dice Roll</button>
                <button id="showSlotMachineBtn">Slot Machine</button>
                </div>

            <div id="coinFlipGame" class="game-area active">
                <h2>Coin Flip</h2>
                <div class="input-group">
                    <label for="coinBetAmount">Bet Amount:</label>
                    <input type="number" id="coinBetAmount" value="10" min="1" step="1">
                </div>

                <div class="buttons">
                    <button id="flipHeadsBtn">Flip (Heads)</button>
                    <button id="flipTailsBtn">Flip (Tails)</button>
                </div>
                <p class="message" id="coinGameMessage"></p>
                <p class="outcome-display" id="coinFlipResult"></p>
            </div>

            <div id="diceRollGame" class="game-area">
                <h2>Dice Roll</h2>
                <div class="input-group">
                    <label for="diceBetAmount">Bet Amount:</label>
                    <input type="number" id="diceBetAmount" value="20" min="1" step="1">
                </div>

                <div class="dice-container">
                    <div class="dice" id="dice1">?</div>
                    <div class="dice" id="dice2">?</div>
                </div>

                <div class="dice-buttons">
                    <button id="rollBtn">Roll Dice</button>
                    <button id="betLowBtn">Bet Low (2-6)</button>
                    <button id="betSevenBtn">Bet 7</button>
                    <button id="betHighBtn">Bet High (8-12)</button>
                </div>
                <p class="message" id="diceGameMessage"></p>
                <p class="outcome-display" id="diceRollResult"></p>
            </div>

            <div id="slotMachineGame" class="game-area">
                <h2>Slot Machine</h2>
                <div class="input-group">
                    <label for="slotBetAmount">Bet Amount:</label>
                    <input type="number" id="slotBetAmount" value="50" min="10" step="10">
                </div>

                <div class="slot-reels-container">
                    <div class="slot-reel" id="reel1"><span class="slot-symbol">🍒</span></div>
                    <div class="slot-reel" id="reel2"><span class="slot-symbol">🍋</span></div>
                    <div class="slot-reel" id="reel3"><span class="slot-symbol">🔔</span></div>
                </div>

                <div class="game-controls">
                    <button id="spinSlotBtn" class="slot-spin-button">Spin</button>
                </div>
                <p class="message" id="slotGameMessage"></p>
                <p class="outcome-display" id="slotResult"></p>
            </div>

            <button id="backToEntranceBtn" class="back-to-entrance">Back to Entrance</button>

        </div>

        <script>
            // --- Page Navigation Elements ---
            const homepage = document.getElementById('homepage');
            const casinoLobby = document.getElementById('casino-lobby');
            const enterCasinoBtn = document.getElementById('enterCasinoBtn');
            const backToEntranceBtn = document.getElementById('backToEntranceBtn');

            // --- Global Variables ---
            let playerBalance = 1000;
            const playerBalanceSpan = document.getElementById('playerBalance');

            // --- Game Selection Elements ---
            const gameButtons = {
                coinFlip: document.getElementById('showCoinFlipBtn'),
                diceRoll: document.getElementById('showDiceRollBtn'),
                slotMachine: document.getElementById('showSlotMachineBtn'),
            };

            const gameAreas = {
                coinFlip: document.getElementById('coinFlipGame'),
                diceRoll: document.getElementById('diceRollGame'),
                slotMachine: document.getElementById('slotMachineGame'),
            };

            // --- Utility Functions ---
            function updateBalanceDisplay() {
                playerBalanceSpan.textContent = playerBalance;
                checkAllGameButtonsState();
            }

            function setGameMessage(messageP, msg, type = 'info') {
                messageP.textContent = msg;
                messageP.className = 'message ' + type;
            }

            function checkAllGameButtonsState() {
                // Coin Flip Buttons
                const coinBetAmount = parseInt(coinBetAmountInput.value);
                const canBetCoin = playerBalance >= coinBetAmount && coinBetAmount > 0;
                flipHeadsBtn.disabled = !canBetCoin;
                flipTailsBtn.disabled = !canBetCoin;

                // Dice Roll Buttons
                const diceBetAmount = parseInt(diceBetAmountInput.value);
                const canBetDice = playerBalance >= diceBetAmount && diceBetAmount > 0;
                rollBtn.disabled = !canBetDice;
                betLowBtn.disabled = !canBetDice;
                betSevenBtn.disabled = !canBetDice;
                betHighBtn.disabled = !canBetDice;

                // Slot Machine Buttons
                const slotBetAmount = parseInt(slotBetAmountInput.value);
                const canBetSlot = playerBalance >= slotBetAmount && slotBetAmount > 0;
                spinSlotBtn.disabled = !canBetSlot;

                if (playerBalance <= 0) {
                    // Disable all game selection buttons
                    for (const key in gameButtons) {
                        gameButtons[key].disabled = true;
                    }
                    // Disable all in-game action buttons
                    document.querySelectorAll('.game-area button').forEach(btn => btn.disabled = true);
                    setGameMessage(coinGameMessageP, "Game Over! You ran out of money. Refresh to play again.", 'error');
                    setGameMessage(diceGameMessageP, "Game Over! You ran out of money. Refresh to play again.", 'error');
                    setGameMessage(slotGameMessageP, "Game Over! You ran out of money. Refresh to play again.", 'error');
                } else {
                    // Re-enable game selection buttons if player has balance
                    for (const key in gameButtons) {
                        gameButtons[key].disabled = false;
                    }
                }
            }

            // --- Page Navigation Logic ---
            enterCasinoBtn.addEventListener('click', () => {
                homepage.classList.remove('active');
                casinoLobby.classList.add('active');
                // Re-initialize balance display and button states when entering casino
                updateBalanceDisplay();
                showGame('coinFlip'); // Show default game
            });

            backToEntranceBtn.addEventListener('click', () => {
                casinoLobby.classList.remove('active');
                homepage.classList.add('active');
                // Clear all game messages when returning to homepage
                coinGameMessageP.textContent = ''; coinFlipResultP.textContent = '';
                diceGameMessageP.textContent = ''; diceRollResultP.textContent = '';
                slotGameMessageP.textContent = ''; slotResultP.textContent = '';
                document.querySelectorAll('.slot-reel').forEach(reel => reel.classList.remove('highlight')); // Clear slot highlights
            });

            // --- Game Selection Logic ---
            function showGame(gameId) {
                for (const id in gameAreas) {
                    gameAreas[id].classList.remove('active');
                }
                for (const id in gameButtons) {
                    gameButtons[id].classList.remove('active');
                }

                gameAreas[gameId].classList.add('active');
                gameButtons[gameId].classList.add('active');

                // Clear messages and results when switching games
                coinGameMessageP.textContent = ''; coinFlipResultP.textContent = '';
                diceGameMessageP.textContent = ''; diceRollResultP.textContent = '';
                slotGameMessageP.textContent = ''; slotResultP.textContent = '';
                document.querySelectorAll('.slot-reel').forEach(reel => reel.classList.remove('highlight'));
                updateBalanceDisplay();
            }

            gameButtons.coinFlip.addEventListener('click', () => showGame('coinFlip'));
            gameButtons.diceRoll.addEventListener('click', () => showGame('diceRoll'));
            gameButtons.slotMachine.addEventListener('click', () => showGame('slotMachine'));

            // --- Coin Flip Game Logic ---
            const coinBetAmountInput = document.getElementById('coinBetAmount');
            const flipHeadsBtn = document.getElementById('flipHeadsBtn');
            const flipTailsBtn = document.getElementById('flipTailsBtn');
            const coinFlipResultP = document.getElementById('coinFlipResult');
            const coinGameMessageP = document.getElementById('coinGameMessage');

            function flipCoin(choice) {
                const betAmount = parseInt(coinBetAmountInput.value);
                if (isNaN(betAmount) || betAmount <= 0) { setGameMessage(coinGameMessageP, "Enter a valid bet.", 'error'); return; }
                if (playerBalance < betAmount) { setGameMessage(coinGameMessageP, "Not enough balance!", 'error'); return; }

                playerBalance -= betAmount;
                updateBalanceDisplay();
                setGameMessage(coinGameMessageP, "Flipping...", 'info');
                coinFlipResultP.textContent = "";

                const coinOutcome = Math.random() < 0.5 ? 'Heads' : 'Tails';

                setTimeout(() => {
                    coinFlipResultP.textContent = `It's ${coinOutcome}!`;
                    if (coinOutcome === choice) {
                        playerBalance += (betAmount * 2);
                        setGameMessage(coinGameMessageP, `You won $${betAmount}!`, 'win');
                    } else {
                        setGameMessage(coinGameMessageP, `You lost $${betAmount}.`, 'loss');
                    }
                    updateBalanceDisplay();
                }, 1000);
            }

            flipHeadsBtn.addEventListener('click', () => flipCoin('Heads'));
            flipTailsBtn.addEventListener('click', () => flipCoin('Tails'));
            coinBetAmountInput.addEventListener('input', updateBalanceDisplay);

            // --- Dice Roll Game Logic ---
            const diceBetAmountInput = document.getElementById('diceBetAmount');
            const dice1Div = document.getElementById('dice1');
            const dice2Div = document.getElementById('dice2');
            const rollBtn = document.getElementById('rollBtn');
            const betLowBtn = document.getElementById('betLowBtn');
            const betSevenBtn = document.getElementById('betSevenBtn');
            const betHighBtn = document.getElementById('betHighBtn');
            const diceRollResultP = document.getElementById('diceRollResult');
            const diceGameMessageP = document.getElementById('diceGameMessage');
            let lastDiceChoice = '';

            function rollDice() {
                const betAmount = parseInt(diceBetAmountInput.value);
                if (isNaN(betAmount) || betAmount <= 0) { setGameMessage(diceGameMessageP, "Enter a valid bet.", 'error'); return false; }
                if (playerBalance < betAmount) { setGameMessage(diceGameMessageP, "Not enough balance!", 'error'); return false; }

                playerBalance -= betAmount;
                updateBalanceDisplay();
                setGameMessage(diceGameMessageP, "Rolling...", 'info');
                diceRollResultP.textContent = "";
                dice1Div.textContent = '?'; dice2Div.textContent = '?';
                dice1Div.classList.add('rolling'); dice2Div.classList.add('rolling');

                const die1 = Math.floor(Math.random() * 6) + 1;
                const die2 = Math.floor(Math.random() * 6) + 1;
                const total = die1 + die2;

                setTimeout(() => {
                    dice1Div.classList.remove('rolling'); dice2Div.classList.remove('rolling');
                    dice1Div.textContent = die1; dice2Div.textContent = die2;
                    diceRollResultP.textContent = `Rolled: ${die1} + ${die2} = ${total}`;

                    let win = false;
                    let payoutMultiplier = 0;

                    if (lastDiceChoice === 'Low' && total >= 2 && total <= 6) { win = true; payoutMultiplier = 2; }
                    else if (lastDiceChoice === 'Seven' && total === 7) { win = true; payoutMultiplier = 5; }
                    else if (lastDiceChoice === 'High' && total >= 8 && total <= 12) { win = true; payoutMultiplier = 2; }

                    if (win) {
                        const winnings = betAmount * (payoutMultiplier - 1);
                        playerBalance += (betAmount * payoutMultiplier);
                        setGameMessage(diceGameMessageP, `You won $${winnings}!`, 'win');
                    } else {
                        setGameMessage(diceGameMessageP, `You lost $${betAmount}.`, 'loss');
                    }
                    updateBalanceDisplay();
                    lastDiceChoice = '';
                }, 1500);
                return true;
            }

            rollBtn.addEventListener('click', () => { lastDiceChoice = ''; rollDice(); });
            betLowBtn.addEventListener('click', () => { lastDiceChoice = 'Low'; rollDice(); });
            betSevenBtn.addEventListener('click', () => { lastDiceChoice = 'Seven'; rollDice(); });
            betHighBtn.addEventListener('click', () => { lastDiceChoice = 'High'; rollDice(); });
            diceBetAmountInput.addEventListener('input', updateBalanceDisplay);

            // --- Slot Machine Game Logic ---
            const slotBetAmountInput = document.getElementById('slotBetAmount');
            const slotReels = [
                document.getElementById('reel1'),
                document.getElementById('reel2'),
                document.getElementById('reel3')
            ];
            const slotSymbols = ['🍒', '🍋', '🔔', '💎', '🍀', '💰', '7️⃣'];
            const spinSlotBtn = document.getElementById('spinSlotBtn');
            const slotResultP = document.getElementById('slotResult');
            const slotGameMessageP = document.getElementById('slotGameMessage');

            function spinSlot() {
                const betAmount = parseInt(slotBetAmountInput.value);
                if (isNaN(betAmount) || betAmount <= 0 || betAmount % 10 !== 0) {
                    setGameMessage(slotGameMessageP, "Bet must be a positive multiple of 10.", 'error');
                    return;
                }
                if (playerBalance < betAmount) {
                    setGameMessage(slotGameMessageP, "Not enough balance!", 'error');
                    return;
                }

                playerBalance -= betAmount;
                updateBalanceDisplay();
                setGameMessage(slotGameMessageP, "Spinning...", 'info');
                slotResultP.textContent = "";
                slotReels.forEach(reel => {
                    reel.classList.add('spinning');
                    reel.classList.remove('highlight');
                    reel.querySelector('.slot-symbol').textContent = '?';
                });
                spinSlotBtn.disabled = true;

                const results = [];
                let stopDelay = 0;
                slotReels.forEach((reel, index) => {
                    const randomSymbol = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
                    results.push(randomSymbol);

                    stopDelay += (index === 0 ? 1500 : 700);
                    setTimeout(() => {
                        reel.classList.remove('spinning');
                        reel.querySelector('.slot-symbol').textContent = randomSymbol;

                        if (index === slotReels.length - 1) {
                            checkSlotWin(results, betAmount);
                            spinSlotBtn.disabled = false;
                            updateBalanceDisplay();
                        }
                    }, stopDelay);
                });
            }

            function checkSlotWin(results, betAmount) {
                const [r1, r2, r3] = results;
                let winnings = 0;
                let message = "No win this time.";
                let messageType = 'loss';
                let highlightReels = [];

                if (r1 === r2 && r2 === r3) { // Three of a kind
                    winnings = betAmount * 10;
                    message = `JACKPOT! Three ${r1}'s! You won $${winnings}!`;
                    messageType = 'win';
                    highlightReels = [0, 1, 2];
                } else if (r1 === r2 || r2 === r3) { // Two of a kind (adjacent)
                    winnings = betAmount * 2;
                    message = `Two of a kind! You won $${winnings}!`;
                    messageType = 'win';
                    if (r1 === r2) highlightReels = [0, 1];
                    else highlightReels = [1, 2];
                }

                if (winnings > 0) {
                    playerBalance += winnings;
                    setGameMessage(slotGameMessageP, message, messageType);
                    slotResultP.textContent = `+$${winnings}`;
                    highlightReels.forEach(index => slotReels[index].classList.add('highlight'));
                } else {
                    setGameMessage(slotGameMessageP, message, messageType);
                    slotResultP.textContent = "";
                }
            }

            spinSlotBtn.addEventListener('click', spinSlot);
            slotBetAmountInput.addEventListener('input', updateBalanceDisplay);


            // --- Initial Load Logic ---
            // Ensure homepage is active initially
            document.addEventListener('DOMContentLoaded', () => {
                homepage.classList.add('active');
                casinoLobby.classList.remove('active'); // Ensure casino is hidden initially
            });

        </script>
    </body>
    </html>